​	在实际序列和预测序列对比的过程中，目前的比对方法是直接将每一个窗口内的预测情况和实际情况对比得出准确度，这样的方法过于严苛，一旦预测卡顿与实际情况没有重合就判为错，在环境不稳定、卡顿较多的情况下，准确率会明显偏低。所以我列出了四种方案，用于增加容错。

### 1.**滑动窗口容错法**

- **思路**：如果某个时间窗口的预测结果和实际结果不同，可能是偶然的预测错误。为了减少这种偶然错误的影响，可以考虑对多个相邻时间窗口的情况进行判断。如果相邻时间窗口内的预测与实际卡顿情况相似，可以认为预测是正确的。
- **做法**：设定一个滑动窗口大小，例如3秒、5秒等，对每个滑动窗口内的结果进行比对，确定一个阈值，若窗口内至少一半以上的时间窗口预测正确，则认为该窗口预测正确。
- **实现**：
  - 比如用3秒窗口，可以将`A[i], A[i+1], A[i+2]`和`B[i], B[i+1], B[i+2]`比较，如果其中大于等于2个时刻预测正确，就认为该窗口的预测是正确的。

- **例子**：1代表卡顿，0代表流

  | 时间/s   | 1    | 2    | 3    | 4    | 5    | 6    |
  | -------- | ---- | ---- | ---- | ---- | ---- | ---- |
  | 实际序列 | 0    | 1    | 1    | 0    | 1    | 0    |
  | 预测序列 | 0    | 1    | 0    | 0    | 1    | 1    |

  - 直接比对法的准确率为66.7%

  - 使用滑动窗口进行容错，比如在3s的窗口上有2s以上的窗口匹配成功即为正确，此时在这一段序列上的准确率为100%

### 2.**边缘模糊匹配法**

- **思路**：预测卡顿时刻可能会有小的误差，尤其在卡顿时段的边缘位置。可以容忍预测卡顿时刻和实际卡顿时刻之间存在一定的偏差，特别是在卡顿的前后几秒钟。
- **做法**：
  - **设置时间容忍边界**：假设容忍±1秒、±2秒等误差，允许卡顿预测在卡顿开始或结束的边缘上出现少许偏差。
  - **示例**：如果实际卡顿在`t=5s`，而预测的卡顿发生在`t=4.5s`或`t=5.5s`，则可以容忍这样的误差。

- **例子**：1代表卡顿，0代表流畅

  | 时间/s   | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |
  | -------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
  | 实际序列 | 0    | 0    | 1    | 1    | 0    | 0    | 1    | 0    | 0    |
  | 预测序列 | 0    | 1    | 0    | 1    | 0    | 0    | 1    | 0    | 0    |

  - 直接比对法准确率为：88.9%
  - 使用边缘模糊匹配法，容忍边界设置为±1s 的误差，即在第3s秒发生的卡顿预测在第2秒也视为正确，认为准确度为100%

### 3.**卡顿时段匹配度**

- **思路**：除了单独时刻的匹配，还可以比较卡顿的“时段”是否被准确捕捉。即使具体时刻有所偏差，只要大体的卡顿时间段一致，仍然可以认为预测是成功的。
- **做法**：
  - **使用重叠度作为标准**：比较实际卡顿段与预测卡顿段的重叠程度，若重叠度大于某个阈值（如70%），则认为预测正确。

- **例子**：1代表卡顿，0代表流畅

  | 时间/s   | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |
  | -------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
  | 实际序列 | 0    | 1    | 1    | 0    | 0    | 1    | 1    | 1    | 0    |
  | 预测序列 | 0    | 1    | 1    | 0    | 0    | 0    | 1    | 1    | 1    |

  - 直接比对法准确度为77.8%
  - 匹配卡顿的时段，如果重叠度超过阈值（如60%），则认为预测时段是正确的。对于实际卡顿的[6s,8s]，对应的预测时段中[7s,8s]是有卡顿，重叠部分为2s，重叠度为66.7%，大于60%，可以认为是正确的，表中时段的准确度为100%

### 4.**加权时段比对**

- **思路**：在卡顿预测中，某些时段可能比其他时段更重要（例如高峰时段或长时间持续卡顿时段）。对这些时段的预测要求更高，给予更高的权重，而对短时间小卡顿的时段给予更低的权重。
- **做法**：
  - 为每个时间段设定一个权重，例如，对于长时间持续的卡顿时段给予更高的权重，对于短时间的卡顿给予较低的权重。根据权重来判断预测是否正确，减少对于不重要时段误差的惩罚。

- **例子**：

  | 时间/s   | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    | 10   |
  | -------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
  | 实际序列 | 0    | 1    | 1    | 1    | 0    | 0    | 1    | 0    | 1    | 1    |
  | 预测序列 | 0    | 1    | 1    | 0    | 0    | 1    | 0    | 1    | 1    | 1    |

  - 直接比对法的准确度为60%
  - 实际序列中2~4s的卡顿为长时间卡顿时段，权重为2，第7秒和9~10秒的卡顿为短时间卡顿时段，权重为1。
  
    对于第一个卡顿时段，预测准确度为66.7%，则这个时段得分为2×66.7%=1.33；对于第二个时段，预测卡顿时间为1s，预测准确度为0%，该时段得分为1×0%=0,；对于第三个时段，预计卡顿时间为2s，预测准确度为100%，则该时段得分为1×100%=1；计算卡顿时刻的加权准确度=总加权得分/总权重=（1.33+0+1）/4=58.25%；则总序列段上的准确度为40%+60%×58.25%=74.95%
  
    

​	目前对于以上方案都只处于一个初步分析的阶段，之后的工作才会继续探究这些方案的可行性，上面举出的例子也只是为了形象理解这些方案给出的示例，这些方案对于我们项目中的预测准确度是否能提升还需要后续的尝试和调整。